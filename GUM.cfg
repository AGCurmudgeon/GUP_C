[gcode_macro PAUSE]
rename_existing: BASE_PAUSE
description: Pause the print and park
variable_etemp: 0
gcode:
    {% if printer.pause_resume.is_paused %}
        RESPOND MSG="Print is already paused"
    {% else %}
        SAVE_GCODE_STATE NAME=PAUSE_state
        RESPOND MSG="PAUSE"
        BASE_PAUSE
        PARK
        SET_GCODE_VARIABLE MACRO=PAUSE VARIABLE=etemp VALUE={printer['extruder'].target}    ; set hotend temp variable for reference in resume macro
        M104 S0
        SET_IDLE_TIMEOUT TIMEOUT=36000
    {% endif %}
